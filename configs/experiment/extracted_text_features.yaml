# @package _global_
experiment_name: extracted_text_features_perbatch16
experiment_output_dir: outputs/${experiment_name}/${now:%Y-%m-%d}/${now:%H-%M}


deepspeed_config_yaml:
#  train_batch_size: 160
#  micro_batch_per_gpu: 32
#  train_batch_size: 80
#  micro_batch_per_gpu: 16
#  train_batch_size: 60
#  micro_batch_per_gpu: 12
#  train_batch_size: 50
#  micro_batch_per_gpu: 10
#  train_batch_size: 40
#  micro_batch_per_gpu: 8
#  train_batch_size: 32
#  micro_batch_per_gpu: 16
#  train_batch_size: 28
#  micro_batch_per_gpu: 14
  train_batch_size: 24
  micro_batch_per_gpu: 12
  cuda_visible_devices: 1,4
#  fp16:
#    autocast: true
  tensorboard:
    output_path: ${experiment_output_dir}


train:
  epochs: 10

hydra:
  run:
    # dir: outputs/${experiment_name}/${now:%Y-%m-%d}/${now:%H-%M}
    dir: ${experiment_output_dir}
  verbose: false


# deepspeed --no_local_rank --num_gpus 5 pretrain_csa_ds_extracted_text_features.py +experiment=extracted_text_features
# deepspeed --no_local_rank --include localhost:0,4  pretrain_csa_ds_extracted_text_features.py +experiment=extracted_text_features